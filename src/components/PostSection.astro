---
import type { PostModel } from "../api/post";

type Props = {
  posts: PostModel[];
};

const { posts } = Astro.props;
---

<section class="space-y-5">
  <header
    class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between"
  >
    <div class="space-y-1">
      <h2 class="text-2xl font-semibold tracking-tight text-white sm:text-3xl">
        Últimos posts
      </h2>
      <p class="text-sm text-white/60">
        Actualización de ejemplo desde la API.
      </p>
    </div>
    <div
      class="w-max rounded-full border border-white/10 bg-white/5 px-3 py-1 text-sm text-white/70"
    >
      {posts.length} items
    </div>
  </header>

  {
    posts.length === 0 ? (
      <div class="rounded-2xl border border-white/10 bg-white/5 p-6 text-sm text-white/70 shadow-[0_0_0_1px_rgba(255,255,255,0.04)_inset]">
        No hay posts disponibles en este momento.
      </div>
    ) : (
      <div class="rounded-2xl border border-white/10 bg-white/5 shadow-[0_0_0_1px_rgba(255,255,255,0.04)_inset]">
        <ul class="divide-y divide-white/10">
          {posts.map((post) => (
            <li>
              <a
                href={`/post/${post.id}`}
                class="group block px-5 py-4 transition hover:bg-white/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-orange-400 focus-visible:ring-offset-2 focus-visible:ring-offset-black sm:px-6"
              >
                <div class="flex flex-col gap-2">
                  <div class="flex flex-col gap-1 sm:flex-row sm:items-start sm:justify-between">
                    <h3 class="text-base font-semibold text-white transition group-hover:text-orange-300">
                      {post.title}
                    </h3>
                    <div class="flex gap-2 text-xs text-white/50">
                      <span class="rounded-md border border-white/10 bg-black/20 px-2 py-0.5">
                        Post #{post.id}
                      </span>
                      <span class="rounded-md border border-white/10 bg-black/20 px-2 py-0.5">
                        User #{post.userId}
                      </span>
                    </div>
                  </div>
                  <p class="text-sm leading-6 text-white/65">{post.body}</p>
                </div>
              </a>
            </li>
          ))}
        </ul>
      </div>
    )
  }
</section>
